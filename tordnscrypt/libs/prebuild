 #!/bin/bash

cd "$( dirname "${BASH_SOURCE[0]}" )"

obfs4proxy_version=e330d1b7
dnscryptproxy_version=2.1.1
snowflake_version=v2.1.0
tor_openssl_version=OpenSSL_1_1_1o
libevent_version=release-2.1.12-stable
zstd_version=v1.4.9
xz_version=v5.2.4
tor_version=release-0.4.7
i2pd_openssl_version=OpenSSL_1_1_1o
miniupnpc_version=c2818392e12f42901ab5abf145f43d69825a38c9
i2pd_version=2.42.0

git clone https://git.torproject.org/pluggable-transports/obfs4.git
pushd obfs4
git checkout -f $obfs4proxy_version -b $obfs4proxy_version
popd

git clone --single-branch --branch $dnscryptproxy_version https://github.com/DNSCrypt/dnscrypt-proxy

git clone https://git.torproject.org/pluggable-transports/snowflake.git
pushd snowflake/
git checkout -f $snowflake_version -b $snowflake_version
popd

pushd ../../TorBuildScript/external/
git clone --single-branch --branch $tor_openssl_version https://github.com/openssl/openssl.git
git clone --single-branch --branch $libevent_version https://github.com/libevent/libevent.git
git clone --single-branch --branch $zstd_version https://github.com/facebook/zstd.git
git clone --single-branch --branch $xz_version https://git.tukaani.org/xz.git
git clone --single-branch --branch $tor_version https://git.torproject.org/tor.git
popd

pushd ../../PurpleI2PBuildScript/external/
mkdir -p libs
pushd libs/
git clone --single-branch --branch $i2pd_openssl_version https://github.com/openssl/openssl.git
git clone https://github.com/moritz-wundke/Boost-for-Android.git
git clone https://github.com/miniupnp/miniupnp.git
pushd miniupnp/
git checkout -f $miniupnpc_version -b $miniupnpc_version
popd
git clone https://github.com/PurpleI2P/android-ifaddrs.git
popd
git clone https://github.com/PurpleI2P/i2pd.git
pushd i2pd/
git checkout -f $i2pd_version -b $i2pd_version
popd
popd
